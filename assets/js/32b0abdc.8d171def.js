"use strict";(globalThis.webpackChunksourcescribe_docs=globalThis.webpackChunksourcescribe_docs||[]).push([[9788],{7871:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"api-reference/files/sourcescribe_api_anthropic_provider","title":"Anthropic Claude API Provider","description":"File Purpose and Overview","source":"@site/docs/api-reference/files/sourcescribe_api_anthropic_provider.md","sourceDirName":"api-reference/files","slug":"/api-reference/files/sourcescribe_api_anthropic_provider","permalink":"/docs/api-reference/files/sourcescribe_api_anthropic_provider","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var i=s(4848),t=s(8453);const o={},a="Anthropic Claude API Provider",c={},d=[{value:"File Purpose and Overview",id:"file-purpose-and-overview",level:2},{value:"Main Components",id:"main-components",level:2},{value:"<code>AnthropicProvider</code> Class",id:"anthropicprovider-class",level:3},{value:"Methods",id:"methods",level:4},{value:"Key Functionality",id:"key-functionality",level:2},{value:"Dependencies and Imports",id:"dependencies-and-imports",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Important Implementation Details",id:"important-implementation-details",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"anthropic-claude-api-provider",children:"Anthropic Claude API Provider"})}),"\n",(0,i.jsx)(n.h2,{id:"file-purpose-and-overview",children:"File Purpose and Overview"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"anthropic_provider.py"})," file contains the implementation of the ",(0,i.jsx)(n.code,{children:"AnthropicProvider"})," class, which is a provider for the Anthropic Claude language model. This class is part of the ",(0,i.jsx)(n.code,{children:"sourcescribe-core"})," project and is responsible for interacting with the Anthropic Claude API to generate responses for language model tasks."]}),"\n",(0,i.jsx)(n.h2,{id:"main-components",children:"Main Components"}),"\n",(0,i.jsxs)(n.h3,{id:"anthropicprovider-class",children:[(0,i.jsx)(n.code,{children:"AnthropicProvider"})," Class"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AnthropicProvider"})," class is the main component of this file. It inherits from the ",(0,i.jsx)(n.code,{children:"BaseLLMProvider"})," class and provides an implementation for generating responses using the Anthropic Claude API."]}),"\n",(0,i.jsx)(n.h4,{id:"methods",children:"Methods"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"__init__(self, *args, **kwargs)"}),": Initializes the ",(0,i.jsx)(n.code,{children:"AnthropicProvider"})," instance by checking if the Anthropic SDK is available, validating the API key, and setting the default model if not provided."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"generate(self, messages: List[LLMMessage], system_prompt: Optional[str] = None, **kwargs: Any) -> LLMResponse"}),": Generates a response using the Anthropic Claude API. It converts the input messages to the Anthropic format, prepares the request parameters, makes the API call, and returns an ",(0,i.jsx)(n.code,{children:"LLMResponse"})," object."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"generate_streaming(self, messages: List[LLMMessage], system_prompt: Optional[str] = None, **kwargs: Any) -> Iterator[str]"}),": Generates a streaming response using the Anthropic Claude API. It converts the input messages to the Anthropic format, prepares the request parameters, and yields the response chunks as they are received."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"key-functionality",children:"Key Functionality"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AnthropicProvider"})," class provides the following key functionality:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Anthropic Claude API Integration"}),": The class encapsulates the interaction with the Anthropic Claude API, handling the necessary request parameters and response processing."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Conversation Message Handling"}),": The ",(0,i.jsx)(n.code,{children:"generate()"})," and ",(0,i.jsx)(n.code,{children:"generate_streaming()"})," methods accept a list of ",(0,i.jsx)(n.code,{children:"LLMMessage"})," objects, which represent the conversation context, and optionally a system prompt."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response Generation"}),": The class generates responses using the Anthropic Claude language model, either as a complete response or as a streaming response."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response Formatting"}),": The generated responses are formatted and returned as ",(0,i.jsx)(n.code,{children:"LLMResponse"})," objects, which contain the response content, model information, usage statistics, and the raw response from the API."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dependencies-and-imports",children:"Dependencies and Imports"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"anthropic_provider.py"})," file has the following dependencies:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"typing"}),": Provides type annotations for the function parameters and return values."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sourcescribe.api.base"}),": Imports the ",(0,i.jsx)(n.code,{children:"BaseLLMProvider"}),", ",(0,i.jsx)(n.code,{children:"LLMMessage"}),", and ",(0,i.jsx)(n.code,{children:"LLMResponse"})," classes from the base API module."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"anthropic"}),": Imports the Anthropic SDK, which is used to interact with the Anthropic Claude API."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,i.jsxs)(n.p,{children:["Here's an example of how to use the ",(0,i.jsx)(n.code,{children:"AnthropicProvider"})," class:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from sourcescribe.api.anthropic_provider import AnthropicProvider\nfrom sourcescribe.api.base import LLMMessage\n\nprovider = AnthropicProvider(api_key="your_anthropic_api_key")\n\nmessages = [\n    LLMMessage(role="user", content="What is the capital of France?"),\n    LLMMessage(role="assistant", content="The capital of France is Paris."),\n    LLMMessage(role="user", content="Can you tell me more about the Eiffel Tower?"),\n]\n\nresponse = provider.generate(messages)\nprint(response.content)\n\nfor chunk in provider.generate_streaming(messages):\n    print(chunk, end="")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"important-implementation-details",children:"Important Implementation Details"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Anthropic SDK Availability Check"}),": The ",(0,i.jsx)(n.code,{children:"AnthropicProvider"})," class checks if the Anthropic SDK is installed and available before initializing the provider. If the SDK is not installed, an ",(0,i.jsx)(n.code,{children:"ImportError"})," is raised."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API Key Validation"}),": The class validates that the ",(0,i.jsx)(n.code,{children:"ANTHROPIC_API_KEY"})," environment variable is set before initializing the provider. If the API key is not provided, a ",(0,i.jsx)(n.code,{children:"ValueError"})," is raised."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Default Model Selection"}),": If the ",(0,i.jsx)(n.code,{children:"model"})," parameter is not provided during initialization, the class sets the default model to ",(0,i.jsx)(n.code,{children:'"claude-3-haiku-20240307"'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Message Conversion"}),": The ",(0,i.jsx)(n.code,{children:"generate()"})," and ",(0,i.jsx)(n.code,{children:"generate_streaming()"})," methods convert the input ",(0,i.jsx)(n.code,{children:"LLMMessage"})," objects to the format expected by the Anthropic API."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response Extraction"}),": The ",(0,i.jsx)(n.code,{children:"generate()"})," method extracts the response content from the Anthropic API response, which may contain multiple text blocks, and returns an ",(0,i.jsx)(n.code,{children:"LLMResponse"})," object."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Streaming Response"}),": The ",(0,i.jsx)(n.code,{children:"generate_streaming()"})," method uses the Anthropic API's streaming functionality to yield the response chunks as they are received, allowing for real-time response processing."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context Limiting"}),": The code includes a comment indicating that the content is limited to prevent context overflow, which is an important consideration when working with language models."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);