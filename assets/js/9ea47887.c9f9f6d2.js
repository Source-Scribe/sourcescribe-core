"use strict";(globalThis.webpackChunksourcescribe_docs=globalThis.webpackChunksourcescribe_docs||[]).push([[2956],{5440:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api-reference/architecture/components","title":"Component Architecture","description":"1. Component Breakdown","source":"@site/docs/api-reference/architecture/components.md","sourceDirName":"api-reference/architecture","slug":"/api-reference/architecture/components","permalink":"/docs/api-reference/architecture/components","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Features","permalink":"/docs/api-reference/features/"}}');var i=t(4848),o=t(8453);const s={},a="Component Architecture",d={},l=[{value:"1. Component Breakdown",id:"1-component-breakdown",level:2},{value:"<code>setup</code> Module",id:"setup-module",level:3},{value:"<code>__init__</code> Module",id:"__init__-module",level:3},{value:"<code>anthropic_provider</code>, <code>ollama_provider</code>, <code>openai_provider</code>",id:"anthropic_provider-ollama_provider-openai_provider",level:3},{value:"<code>base</code> Module",id:"base-module",level:3},{value:"<code>factory</code> Module",id:"factory-module",level:3},{value:"<code>cli</code> Module",id:"cli-module",level:3},{value:"<code>loader</code> Module",id:"loader-module",level:3},{value:"<code>models</code> Module",id:"models-module",level:3},{value:"<code>analyzer</code>, <code>diagram</code>, <code>feature_generator</code>, <code>generator</code>",id:"analyzer-diagram-feature_generator-generator",level:3},{value:"<code>file_utils</code>, <code>logger</code>, <code>parser</code>, <code>handler</code>, <code>watcher</code>",id:"file_utils-logger-parser-handler-watcher",level:3},{value:"<code>test_config</code>",id:"test_config",level:3},{value:"2. Communication Patterns",id:"2-communication-patterns",level:2},{value:"3. Data Models",id:"3-data-models",level:2},{value:"4. Design Patterns",id:"4-design-patterns",level:2},{value:"5. Extension Points",id:"5-extension-points",level:2},{value:"System Architecture Diagram",id:"system-architecture-diagram",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"component-architecture",children:"Component Architecture"})}),"\n",(0,i.jsx)(n.h1,{id:"component-architecture-documentation",children:"Component Architecture Documentation"}),"\n",(0,i.jsx)(n.h2,{id:"1-component-breakdown",children:"1. Component Breakdown"}),"\n",(0,i.jsx)(n.p,{children:"The system is composed of the following key components:"}),"\n",(0,i.jsxs)(n.h3,{id:"setup-module",children:[(0,i.jsx)(n.code,{children:"setup"})," Module"]}),"\n",(0,i.jsxs)(n.p,{children:["This module handles the setup and installation of the project, leveraging the ",(0,i.jsx)(n.code,{children:"setuptools"})," library."]}),"\n",(0,i.jsxs)(n.h3,{id:"__init__-module",children:[(0,i.jsx)(n.code,{children:"__init__"})," Module"]}),"\n",(0,i.jsx)(n.p,{children:"This is the main entry point for the library, responsible for importing and exposing the necessary modules and classes."}),"\n",(0,i.jsxs)(n.h3,{id:"anthropic_provider-ollama_provider-openai_provider",children:[(0,i.jsx)(n.code,{children:"anthropic_provider"}),", ",(0,i.jsx)(n.code,{children:"ollama_provider"}),", ",(0,i.jsx)(n.code,{children:"openai_provider"})]}),"\n",(0,i.jsxs)(n.p,{children:["These modules encapsulate the integration with different language model providers, such as Anthropic, Ollama, and OpenAI. They implement the common interface defined in the ",(0,i.jsx)(n.code,{children:"base"})," module."]}),"\n",(0,i.jsxs)(n.h3,{id:"base-module",children:[(0,i.jsx)(n.code,{children:"base"})," Module"]}),"\n",(0,i.jsx)(n.p,{children:"This module defines the abstract base classes and interfaces that the various provider implementations must adhere to. It also contains some common data structures and utilities."}),"\n",(0,i.jsxs)(n.h3,{id:"factory-module",children:[(0,i.jsx)(n.code,{children:"factory"})," Module"]}),"\n",(0,i.jsx)(n.p,{children:"The factory module is responsible for creating instances of the appropriate provider based on the user's configuration or preferences."}),"\n",(0,i.jsxs)(n.h3,{id:"cli-module",children:[(0,i.jsx)(n.code,{children:"cli"})," Module"]}),"\n",(0,i.jsx)(n.p,{children:"This module contains the command-line interface (CLI) functionality, allowing users to interact with the system from the terminal."}),"\n",(0,i.jsxs)(n.h3,{id:"loader-module",children:[(0,i.jsx)(n.code,{children:"loader"})," Module"]}),"\n",(0,i.jsx)(n.p,{children:"The loader module is responsible for loading and parsing configuration files, such as YAML files, to set up the system."}),"\n",(0,i.jsxs)(n.h3,{id:"models-module",children:[(0,i.jsx)(n.code,{children:"models"})," Module"]}),"\n",(0,i.jsx)(n.p,{children:"This module defines the core data models used throughout the system, such as prompts, responses, and other entities."}),"\n",(0,i.jsxs)(n.h3,{id:"analyzer-diagram-feature_generator-generator",children:[(0,i.jsx)(n.code,{children:"analyzer"}),", ",(0,i.jsx)(n.code,{children:"diagram"}),", ",(0,i.jsx)(n.code,{children:"feature_generator"}),", ",(0,i.jsx)(n.code,{children:"generator"})]}),"\n",(0,i.jsx)(n.p,{children:"These modules work together to analyze source code, generate feature documentation, and produce visual diagrams."}),"\n",(0,i.jsxs)(n.h3,{id:"file_utils-logger-parser-handler-watcher",children:[(0,i.jsx)(n.code,{children:"file_utils"}),", ",(0,i.jsx)(n.code,{children:"logger"}),", ",(0,i.jsx)(n.code,{children:"parser"}),", ",(0,i.jsx)(n.code,{children:"handler"}),", ",(0,i.jsx)(n.code,{children:"watcher"})]}),"\n",(0,i.jsx)(n.p,{children:"These are supporting modules that provide utility functions, logging, file parsing, event handling, and file system monitoring capabilities."}),"\n",(0,i.jsx)(n.h3,{id:"test_config",children:(0,i.jsx)(n.code,{children:"test_config"})}),"\n",(0,i.jsx)(n.p,{children:"This module contains the test configuration and setup for the system."}),"\n",(0,i.jsx)(n.h2,{id:"2-communication-patterns",children:"2. Communication Patterns"}),"\n",(0,i.jsx)(n.p,{children:"The main communication patterns in the system are as follows:"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant CLI\n    participant Factory\n    participant Provider\n    participant Models\n    participant Analyzer\n    participant Generator\n\n    CLI ->> Factory: Request provider instance\n    Factory ->> Provider: Create provider instance\n    Provider ->> Models: Use data models\n    CLI ->> Analyzer: Analyze source code\n    Analyzer ->> Models: Use data models\n    CLI ->> Generator: Generate documentation\n    Generator ->> Analyzer: Analyze source code\n    Generator ->> Models: Use data models\n    Generator ->> Diagram: Create diagrams"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"CLI"})," module interacts with the ",(0,i.jsx)(n.code,{children:"Factory"})," to obtain the appropriate provider instance based on the user's configuration. The provider instance then uses the data models defined in the ",(0,i.jsx)(n.code,{children:"models"})," module."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"CLI"})," also interacts with the ",(0,i.jsx)(n.code,{children:"Analyzer"})," and ",(0,i.jsx)(n.code,{children:"Generator"})," modules to analyze the source code and generate the documentation, respectively. The ",(0,i.jsx)(n.code,{children:"Analyzer"})," and ",(0,i.jsx)(n.code,{children:"Generator"})," modules both utilize the data models from the ",(0,i.jsx)(n.code,{children:"models"})," module, and the ",(0,i.jsx)(n.code,{children:"Generator"})," module also interacts with the ",(0,i.jsx)(n.code,{children:"Diagram"})," module to create visual diagrams."]}),"\n",(0,i.jsx)(n.h2,{id:"3-data-models",children:"3. Data Models"}),"\n",(0,i.jsx)(n.p,{children:"The key data models in the system are:"}),"\n",(0,i.jsx)(n.mermaid,{value:"classDiagram\n    class Prompt {\n        +text: str\n        +max_tokens: int\n        +temperature: float\n        +top_p: float\n        +n: int\n        +stream: bool\n        +stop: list[str]\n        +presence_penalty: float\n        +frequency_penalty: float\n    }\n\n    class Response {\n        +text: str\n        +tokens: list[int]\n        +usage: dict\n        +finish_reason: str\n    }\n\n    class SourceFile {\n        +path: pathlib.Path\n        +language: str\n        +lines: int\n        +classes: int\n        +functions: int\n        +dependencies: list[str]\n    }\n\n    class Feature {\n        +name: str\n        +description: str\n        +examples: list[str]\n        +source_files: list[SourceFile]\n    }"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Prompt"})," and ",(0,i.jsx)(n.code,{children:"Response"})," models represent the input and output of the language model, respectively. The ",(0,i.jsx)(n.code,{children:"SourceFile"})," model captures metadata about a source code file, and the ",(0,i.jsx)(n.code,{children:"Feature"})," model represents a high-level functionality or capability of the system, along with its associated source files."]}),"\n",(0,i.jsx)(n.h2,{id:"4-design-patterns",children:"4. Design Patterns"}),"\n",(0,i.jsx)(n.p,{children:"The system employs the following design patterns:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Factory Pattern"}),": The ",(0,i.jsx)(n.code,{children:"factory"})," module uses the factory pattern to create instances of the appropriate provider implementation based on the user's configuration."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Adapter Pattern"}),": The provider implementations in ",(0,i.jsx)(n.code,{children:"anthropic_provider"}),", ",(0,i.jsx)(n.code,{children:"ollama_provider"}),", and ",(0,i.jsx)(n.code,{children:"openai_provider"})," act as adapters, converting the common interface defined in the ",(0,i.jsx)(n.code,{children:"base"})," module to the specific API of each language model provider."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Strategy Pattern"}),": The ",(0,i.jsx)(n.code,{children:"analyzer"}),", ",(0,i.jsx)(n.code,{children:"diagram"}),", and ",(0,i.jsx)(n.code,{children:"generator"})," modules implement the strategy pattern, allowing different analysis and documentation generation strategies to be used interchangeably."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Observer Pattern"}),": The ",(0,i.jsx)(n.code,{children:"watcher"})," module uses the observer pattern to monitor the file system and notify the ",(0,i.jsx)(n.code,{children:"handler"})," module of changes, which then triggers the appropriate actions."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These patterns help to improve the modularity, extensibility, and maintainability of the system."}),"\n",(0,i.jsx)(n.h2,{id:"5-extension-points",children:"5. Extension Points"}),"\n",(0,i.jsx)(n.p,{children:"The system is designed to be easily extensible, with the following key extension points:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Provider Integration"}),": New language model providers can be integrated by implementing the abstract base classes defined in the ",(0,i.jsx)(n.code,{children:"base"})," module and registering them with the ",(0,i.jsx)(n.code,{children:"factory"})," module."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Analysis Strategies"}),": New source code analysis strategies can be implemented by creating new classes that adhere to the ",(0,i.jsx)(n.code,{children:"Analyzer"})," interface, and integrating them with the ",(0,i.jsx)(n.code,{children:"generator"})," module."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Diagram Generation"}),": The diagram generation functionality can be extended by creating new classes that implement the ",(0,i.jsx)(n.code,{children:"Diagram"})," interface, allowing for the creation of custom diagram types."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Configuration Loading"}),": The ",(0,i.jsx)(n.code,{children:"loader"})," module can be extended to support additional configuration file formats or loading mechanisms."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CLI Commands"}),": New CLI commands can be added by creating new functions in the ",(0,i.jsx)(n.code,{children:"cli"})," module and integrating them with the command-line interface."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By leveraging these extension points, developers can easily adapt the system to their specific needs and requirements, without having to modify the core codebase."}),"\n",(0,i.jsx)(n.h2,{id:"system-architecture-diagram",children:"System Architecture Diagram"}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TD\n    title[System Architecture]\n    style title fill:#f9f,stroke:#333,stroke-width:2px\n\n    M0[setup]\n    M1[__init__]\n    M2[anthropic_provider]\n    M3[base]\n    M4[factory]\n    M5[ollama_provider]\n    M6[openai_provider]\n    M7[cli]\n    M8[loader]\n    M9[models]\n    M10[analyzer]\n    M11[diagram]\n    M12[feature_generator]\n    M13[generator]\n    M14[file_utils]\n    M15[logger]\n    M16[parser]\n    M17[handler]\n    M18[watcher]\n    M19[test_config]\n    M20[test_diagram]\n    M21[test_exclusions]\n    M22[test_file_utils]\n    M23[test_parser]\n\n    M2 --\x3e M3\n    M4 --\x3e M9\n    M4 --\x3e M5\n    M4 --\x3e M2\n    M4 --\x3e M6\n    M4 --\x3e M3\n    M5 --\x3e M3\n    M6 --\x3e M3\n    M7 --\x3e M9\n    M7 --\x3e M13\n    M7 --\x3e M8\n    M7 --\x3e M15\n    M7 --\x3e M18\n    M8 --\x3e M9\n    M10 --\x3e M9\n    M10 --\x3e M14\n    M10 --\x3e M16\n    M10 --\x3e M15\n    M12 --\x3e M14\n    M12 --\x3e M3\n    M13 --\x3e M11\n    M13 --\x3e M9\n    M13 --\x3e M4\n    M13 --\x3e M15\n    M13 --\x3e M12\n    M13 --\x3e M14\n    M13 --\x3e M3\n    M13 --\x3e M10\n    M17 --\x3e M15\n    M18 --\x3e M9\n    M18 --\x3e M17\n    M18 --\x3e M15\n    M19 --\x3e M9\n    M19 --\x3e M8\n    M20 --\x3e M11\n    M21 --\x3e M9\n    M21 --\x3e M14\n    M23 --\x3e M16"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);